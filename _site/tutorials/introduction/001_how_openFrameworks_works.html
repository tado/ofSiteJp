








<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>openFrameworks.jp</title>

<!-- syntax highlighting for the documentation -->
<script src="http://localhost:8080/js/shCore.js" type="text/javascript"></script>
<script src="http://localhost:8080/js/shAutoloader.js" type="text/javascript"></script>
<script src="http://localhost:8080/js/shBrushCpp.js" type="text/javascript"></script>
<script src="http://localhost:8080/js/shBrushJava.js" type="text/javascript"></script>
<link href="http://localhost:8080/css/shCore.css" rel="stylesheet" type="text/css" />
<link href="http://localhost:8080/css/shThemeDefault.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" type="text/css" href="http://localhost:8080/css/style.css" media="all" />
<link rel="stylesheet" type="text/css" href="http://localhost:8080/css/print.css" media="print" />
<link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
<link rel="search" type="application/opensearchdescription+xml" href="http://localhost:8080/opensearch.xml" title="openFrameworks" />

<link rel="shortcut icon" href="http://localhost:8080/favicon.ico" />
<link rel="icon" href="http://localhost:8080/favicon.ico" type="image/x-icon" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://localhost:8080/js/jquery.timeago.js" type="text/javascript"></script>

<meta name="google-site-verification" content="RiGtl9pFuFnUeEQ4MU1miiutTR5mmCPUi38YLCn-M-g" />


    <script src="http://localhost:8080/js/jquery.columnizer.min.js"></script>
    <script src="http://localhost:8080/js/documentation.js"></script>
  </head>
  <body>
    <div id="content">
      
  

<div id="head">

		<div id="head-left">
			<a href="http://localhost:8080" class="nohover"><img src="http://localhost:8080/images/ofw-logo.png" border="0" alt="openFrameworks" /></a>
		</div>

		<div id="head-right">
		<ul>
		
	        <li><a href="http://localhost:8080/about" class="">about</a></li>
	        <li><a href="http://localhost:8080/download" class="" >download</a></li>
	        <li><a href="http://localhost:8080/documentation" class="active">documentation</a></li>
	        <li><a href="http://localhost:8080/gallery" class="">gallery</a></li>
	        <li><a href="http://localhost:8080/community" class="">community</a></li> 
		</ul>
		
		<ul class="menu-externals">
			<li><span class="external-dot"> ></span>&nbsp;<a href="http://forum.openframeworks.cc/index.php" target="_blank">forum</a></li>
			<li><span class="external-dot"> ></span>&nbsp;<a href="http://ofxaddons.com" target="_blank">addons</a></li>
			<li><span class="external-dot"> ></span>&nbsp;<a href="http://wiki.openframeworks.cc/" target="_blank">wiki</a></li>
			<li><span class="external-dot"> ></span>&nbsp;<a href="http://github.com/openframeworks/openFrameworks" target="_blank">github</a></li>
			<li><span class="external-dot"> ></span>&nbsp;<a href="http://openframeworks.cc/list-info" target="_blank">mailing list</a></li>
		</ul>
			<!--form method="get" id="searchform" action="/index.php">
			<input type="text" value="" name="s" id="s" class="search_input" /> <input type="submit" value="Search" class="search_button"/>
			</form-->
			<!--form method="post" action="http://scripts.dreamhost.com/add_list.cgi">
                <input type="hidden" name="list" value="list@openframeworks.cc" />
                <input type="hidden" name="domain" value="openframeworks.cc" />
                <input type="hidden" name="url" value="http://openframeworks.cc/list-info/subscribe.html"  />
                <input type="hidden" name="unsuburl" value="http://openframeworks.cc/list-info/unsubscribe.html" />
                <input type="hidden" name="alreadyonurl" value="http://openframeworks.cc/list-info/already.html" />
                <input type="hidden" name="notonurl" value="http://openframeworks.cc/list-info/not.html" />
                <input type="hidden" name="invalidurl" value="http://openframeworks.cc/list-info/invalid.html" />
                <input type="hidden" name="emailconfirmurl" value="http://openframeworks.cc/list-info/confirm.html" />
                <input type="hidden" name="emailit" value="1" />
                name: <input name="name" /> <br />
                email: <input name="email" /><br />
                <span class='but'><input type="submit" name="submit" value="subscribe" /></span> <br/ >
                <span class='but'><input type="submit" name="unsub" value="unsubscribe" /></span>
            </form-->
		</div>
</div><!-- head -->



      <div id="body-wrap">	
	    <div class="page-wide">
            <ul class="submenu">
                <li><a href="/documentation">reference</a></li>
                <li><a href="/tutorials">tutorials</a></li>
            </ul>

            
            <h1>tutorials</h1>    


        	<div class="submenucol-left">
        	    <ul class="categories">
                        <li><a href="/tutorials/introduction">introduction</a></li>
                </ul>
            </div><!-- End Page Wide -->

        	<div class="submenucol-right">
        	    <h2>How openFrameworks works</h2>
        	    <span class="article_meta">2012/02/23 10:00:00&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;<a href="http://arturocastro.net">Arturo Castro</a></span><br/>
        	    <div class="article">
        	    
  <p>openFrameworks is an open source C++ toolkit designed to assist the creative process by providing a simple and intuitive framework for experimentation. The toolkit is designed to work as a general purpose glue, and wraps together several commonly used libraries. </p>
<p>openFrameworks uses a few patterns so it's easy to understand how things work. Once you understand how what this patterns are it should be easier to use any of the functionality in openFrameworks.</p>
<p>If you are a developer contributing to OF then this document will also be useful to know how to code your classes so they behave in a consistent way with the rest of openFrameworks</p>
<h2>setup, update, draw</h2>
<p>Most functionality in openframeworks works using this pattern. In every example ofApp's there's also always a setup, update and draw methods.</p>
<h3>setup()</h3>
<p>The setup method is called only once at the beginning of the application and it's used to initialize other objects or variables usually declared in ofApp.h</p>
<p><strong>ofApp.h</strong></p>
<pre><code class="cpp">ofVideoPlayer player;
int counter;
</code></pre>

<p><strong>ofApp.cpp</strong></p>
<pre><code class="cpp">void ofApp::setup(){
    player.loadMovie(&quot;movie.mov&quot;);
    counter = 0;
}
</code></pre>

<p>In c++ it's super important to initialize variables since by default they are not initialized so for example if we don't do counter = 0; counter can have any value.</p>
<h3>update/draw()</h3>
<p>Update and draw are called in an inifinite loop one after another in that order till we finish the application.</p>
<p>Update is meant to be used for updating the state of our application, do any calculations we need to do and update other objects like video players, grabbers any computer vision analisys we might be doing...</p>
<p>In draw we draw to the screen.</p>
<p><strong>ofApp.h</strong></p>
<pre><code class="cpp">float x;
</code></pre>

<p><strong>ofApp.cpp</strong></p>
<pre><code class="cpp">void ofApp::setup(){
    x = 0;
}

void ofApp::update(){
    x++;
}

void ofApp::draw(){
    ofCircle(x,120,30);
}
</code></pre>

<p>will draw a circle at y=120 moving from the left to the right of the screen.</p>
<h2>Classes</h2>
<p>openFrameworks is mostly organized in classes. There's 3 types of classes:</p>
<h3>Utility classes</h3>
<p>This are classes that do something. Classes like ofVideoGrabber, ofVideoPlayer, ofSoundPlayer, ofImage... most of this classes work using the setup/update/draw pattern. Of course for some of them draw won't make sense like an ofSoundPlayer doesn't have a draw method.</p>
<p>This classes also follow a shared pointer pattern. That means that when they are copied the copy is actually what it's called a shallow copy. A shallow copy is only a reference to the object not a copy of it's contents.</p>
<p>For example if you copy a video player and then modify the copy somehow that will also modify the original:</p>
<p><strong>ofApp.h</strong></p>
<pre><code class="cpp">ofVideoPlayer player;
</code></pre>

<p><strong>ofApp.cpp</strong></p>
<pre><code class="cpp">void ofApp::update(){
    ofVideoPlayer player2 = player;
    player2.setFrame(100);
}
</code></pre>

<p>will set the current frame to 100 both in player and player2 since actually both player and player2 are a reference to the same object</p>
<h3>Data containers</h3>
<p>This classes contain data and can do some operations over the data they contain. Classes like ofPixels or ofBuffer.</p>
<p>This classes follow an allocate/loadData pattern. allocate reserves memory in the container to then put data in it using loadData. The name of this functions change depending on the class but the functionality is the same. Copying this classes makes a depth copy, that means that a copy is a whole new object with the same contents as the original so modifying the copy won't touch the original.</p>
<p><strong>ofApp.h</strong></p>
<pre><code class="cpp">ofPixels pixels1, pixels2;
ofTexture tex1, tex2;
</code></pre>

<p><strong>ofApp.cpp</strong></p>
<pre><code class="cpp">void ofApp::setup(){
    pixels1.allocate(640,480,OF_IMAGE_COLOR)
    pixels1.set(0);
    pixels2 = pixels1;
    pixels2.setColor(10,10,ofColor(255,255,255);

    tex1.allocate(640,480,GL_RGB);
    tex2.allocate(640,480,GL_RGB);
    tex1.loadData(pixels1);
    tex2.loadData(pixels2);
}

void ofApp::draw(){
    tex1.draw(0,0);
    tex2.draw(660,0);
}
</code></pre>

<p>will draw a completely black image in the left of the screen and a black image with a white pixel at 10,10 in the right. When we call pixels2 = pixels1  pixels2 is allocated with the same size and number of channels as pixels1 and the data in pixels1 is copied to pixels2.</p>
<h3>GL Data containers</h3>
<p>GL data containers are a special case to data containers. The functionality is pretty similar to other data containers and they also follow the allocate/loadData pattern. This are classes like ofTexture, ofFbo, ofVbo or ofVboMesh. All of them are in the gl folder, although not everything in the gl folder is a data container, like ofShader, ofLight which are GL utility classes and usually behave exactly the same as other utility classes.</p>
<p>The main difference between GL data containers and other data containers is that GL data containers follow a shallow copy pattern. The main reason for this is performance, making a copy of resources in the GPU is usually slow so we don't copy them by default.</p>
<p>For example:</p>
<p><strong>ofApp.h</strong></p>
<pre><code class="cpp">ofTexture tex1, tex2;
</code></pre>

<p><strong>ofApp.cpp</strong></p>
<pre><code class="cpp">void ofApp::setup(){
    tex1.allocate(640,480,GL_RGB);
    ofPixels pixels;
    pixels.allocate(640,480,OF_IMAGE_COLOR);
    pixels.set(0);
    tex1.loadData(pixels);
    tex2 = tex1;
    pixels.setColor(10,10,ofColor(255,255,255);
    tex2.loadData(pixels);
}

void ofApp::draw(){
    tex1.draw(0,0);
    tex2.draw(660,0);
}
</code></pre>

<p>will draw a black rectangle with a white pixel at 10,10 in both left and right sides of the screen. This is because in this case we are copying the GL resource which is actually just a reference to the texture ID of the first texture, not a full copy so when modifying it we are also modifying the original.</p>
<h3>Data types</h3>
<p>These are classes that represent types in openFrameworks like ofRectangle, ofVec3f or ofMatrix4x4.</p>
<h2>Functions</h2>
<p>Some functionality in openFrameworks is provided through plain c functions. This are usually utility functions like ofToString(), ofRandom(), ofDrawBitmapString() and simple draw functions like ofCircle(), ofRect()</p>

        		</div>
            </div><!-- End Page Wide -->
        
    	

    	</div>
              
      </div><!-- End Body Wrap -->
      
      <div id="footer">
        
  <p id="credits">

Last updated 
  
Thursday, 23 February 2012 23:41:28 UTC
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/openframeworks/ofSite/commit/

4006e2cd096a9ade8a77ccac5b70f7bc6c8d84c2
">

4006e2cd096a9ade8a77ccac5b70f7bc6c8d84c2
</a>

<!--br/>RSS feeds for <a href="/blog/feed">Entries</a-->

<br/>

</p>




<!--tracking -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-9614675-1");
pageTracker._trackPageview();
} catch(err) {}</script>








      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>







